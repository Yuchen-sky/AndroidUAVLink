# AndroidUAVLink
 for control and get image

# 手机端主要活动
`connectactivity`
做连接测试包括
1. app注册key
2. 个人账户
3. 对应URL的网络连接（静态局域网ip,测试是否可以ping通）

除以上任务，如果没连接成功按钮没有可选，可以先用dji go官方程序进行连接测试，在官方程序大疆spark全套设备连接成功后再关掉官方程序打开此APP。

`mainactivity`
连接成功后的主要活动，基于包括几个解码选项以及回传的图像界面，以及上传图像及获取控制信息的网络要求及接口调用都在该层。 scream shot 为具体的开启传输。
基于[大疆视频流解码教程](https://github.com/DJI-Mobile-SDK-Tutorials/Android-VideoStreamDecodingSample)

`controller`
人手工调控制参数，跟mainactivity・里面的参数一致，方便进行控制测试

# 服务端主要功能

主要接收手机端的信号进行处理，包括上传图片和具体移动信号获得的请求（/uploadimage /getcontrol）

另外有两个函数

1. listen
监听部分键盘输入，以此修改控制信号

2. load_image
加载上传的图片，进行处理

# 暂时连接方法

经测试无人机的wifi网域实际暂不可笔记本连接，所以暂使用官方遥控器作为，无人机，手机，笔记本三者的转接wifi网域。

##### 开启流程

1. 开启遥控器
2. 开启笔记本服务器，笔记本连接遥控器wifi, 查询自己分配到的ip
3. 打开程序，此时连公网，解决账号登录问题
4. 然后手机转连遥控器wifi，观察或者用软件观察是否成功连上笔记本服务,在输入框中输入服务器所在的ip尾号信息，观察是否连上
5. 打开无人机，如果按钮没变蓝，可能是遥控器没连接上无人机，需要借助官方程序先行连接。打开dji go 官方程序，选择晓，选择全套连接，按流程长按无人机按键对频，并在界面上显示连接成功
6. 关掉dji go，转到自己写的程序，此时发现已然连接成功，按钮变蓝，进入使用

# 过去版本问题解决

1.  图片颜色问题 已解决 使用sdk对应的YUV图片处理模式
2.  锁问题，可以进一步考虑防止多线程，目前使用删除代替
3.  内存问题？突然死 已解决 通过单例模式
4.  网域服务器ip变动，每次都要变，增加尾号输入法
